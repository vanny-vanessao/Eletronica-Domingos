<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novo Conserto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/estilos/nv1.css">
</head>
<body>
    <div class="principal">
        <div class="cabecalho">
            <h1 class="logo">Novo Conserto</h1>
            <a href="/inicial" class="btn-voltar">
                <i class="fas fa-arrow-left"></i> Voltar
            </a>
        </div>
        <div class="container-fluid">
            
            </form>
            <form class="w-100" action="/pendentes/novo-conserto1" method="POST">
        
                <h4>Informações do Cliente</h4>

                <p>Nome</p>
                <input type="text" class="form-control" name="nome" placeholder="Nome completo">

                <p>CPF</p>
                <input type="text" class="form-control" name="cpf" id="cpf" placeholder="CPF (somente números)" maxlength="14" inputmode="numeric">

                <p>RG</p>
                <input type="text" class="form-control" name="rg" id="rg" placeholder="RG (somente números)" maxlength="12" inputmode="numeric">

                <p>Telefone</p>
                <input type="text" class="form-control" name="fone" id="fone" placeholder="Ex.: 48 91234-5678" maxlength="15" inputmode="numeric">

                <p>Observações</p>
                <input type="text" class="form-control" name="obs" placeholder="Ex.: Rigoroso, exigente, etc..">

                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="entregaCheck" onchange="toggleEndereco()">
                    <label class="form-check-label" for="entregaCheck">
                        Entregar o aparelho no endereço
                    </label>
                </div>

                <div id="enderecoSection">
                    <h4>Endereço de Entrega</h4>

                    <p>Cidade</p>
                    <input type="text" class="form-control" name="cidade" placeholder="Cidade">

                    <p>Bairro</p>
                    <input type="text" class="form-control" name="bairro" placeholder="Bairro">

                    <p>Rua</p>
                    <input type="text" class="form-control" name="rua" placeholder="Rua, avenida, travessa...">

                    <p>Complemento</p>
                    <input type="text" class="form-control" name="complemento" placeholder="Complemento">

                    <p>Número</p>
                    <input type="text" class="form-control" name="numero" placeholder="Número">

                    <p>CEP</p>
                    <input type="text" class="form-control" name="CEP" placeholder="CEP (apenas números)" maxlength="8">

                    <p>UF</p>
                    <select class="form-control" name="UF">
                        <option value="Santa Catarina">SC</option>
                        <option value="Rio Grande do Sul">RS</option>
                        <option value="Paraná">PR</option>
                    </select>
                </div>

                <div class="btn-container">
                    <button type="submit" class="btn btn-primary">Próximo</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function toggleEndereco() {
            const checkBox = document.getElementById("entregaCheck");
            const enderecoSection = document.getElementById("enderecoSection");
            enderecoSection.style.display = checkBox.checked ? "block" : "none";
        }

        function onlyNumbers(e) {
            let v = e.target.value.replace(/\D/g, '');
            e.target.value = v;
        }

        function formatCPF(e) {
            let v = e.target.value.replace(/\D/g, '').slice(0, 11);
            if (v.length > 9) v = v.replace(/(\d{3})(\d{3})(\d{3})(\d{1,2})/, "$1.$2.$3-$4");
            else if (v.length > 6) v = v.replace(/(\d{3})(\d{3})(\d{1,3})/, "$1.$2.$3");
            else if (v.length > 3) v = v.replace(/(\d{3})(\d{1,3})/, "$1.$2");
            e.target.value = v;
        }

        function formatRG(e) {
            let v = e.target.value.replace(/\D/g, '').slice(0, 9);
            if (v.length > 7) v = v.replace(/(\d{2})(\d{3})(\d{3})(\d{1,1})/, "$1.$2.$3-$4");
            else if (v.length > 5) v = v.replace(/(\d{2})(\d{3})(\d{1,3})/, "$1.$2.$3");
            else if (v.length > 2) v = v.replace(/(\d{2})(\d{1,3})/, "$1.$2");
            e.target.value = v;
        }

        function formatFone(e) {
            let v = e.target.value.replace(/\D/g, '').slice(0, 11);
            if (v.length > 6)
                v = v.replace(/(\d{2})(\d{5})(\d{0,4})/, "$1 $2-$3");
            else if (v.length > 2)
                v = v.replace(/(\d{2})(\d{1,5})/, "$1 $2");
            e.target.value = v.trim();
        }

        // CPF
        const cpfInput = document.getElementById('cpf');
        cpfInput.addEventListener('input', formatCPF);
        cpfInput.addEventListener('keydown', onlyNumbers);
        cpfInput.addEventListener('blur', formatCPF);

        // RG
        const rgInput = document.getElementById('rg');
        rgInput.addEventListener('input', formatRG);
        rgInput.addEventListener('keydown', onlyNumbers);
        rgInput.addEventListener('blur', formatRG);

        // Telefone
        const foneInput = document.getElementById('fone');
        foneInput.addEventListener('input', formatFone);
        foneInput.addEventListener('keydown', onlyNumbers);
        foneInput.addEventListener('blur', formatFone);
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>